<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Version 1.2.0-SNAPSHOT">
<title>Virksert API Specification</title>
<link rel="stylesheet" href="assets/css/asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Virksert API Specification</h1>
<div class="details">
<span id="author" class="author">Version 1.2.0-SNAPSHOT</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_the_services">The services</a></li>
<li><a href="#_participants">Participants</a>
<ul class="sectlevel2">
<li><a href="#get-find-participant">Find a participant</a></li>
<li><a href="#get-find-all-participants">Find all participants</a></li>
<li><a href="#post-add-participant">Add new participant</a></li>
<li><a href="#delete-remove-participant">Delete participant</a></li>
<li><a href="#get-find-certificate">Find a certificate</a></li>
<li><a href="#post-upload-certificate">Upload certificate</a></li>
<li><a href="#delete-remove-certificate">Delete certificate</a></li>
</ul>
</li>
<li><a href="#_certificates">Certificates</a>
<ul class="sectlevel2">
<li><a href="#get-find-all-certificates">Find all certificates</a>
<ul class="sectlevel3">
<li><a href="#_request_parameters_are_optional">Request parameters are optional.</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_users">Users</a>
<ul class="sectlevel2">
<li><a href="#get-find-user">Find a user</a></li>
<li><a href="#get-all-users">Find all users</a></li>
<li><a href="#post-add-user">Add new User</a></li>
<li><a href="#delete-user">Delete user</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_the_services">The services</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP Method</th>
<th class="tableblock halign-left valign-top">URL</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Media type(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-find-participant">/api/v1/participants/{participantParam}</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Find participant">[Find participant]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-find-all-participants">/api/v1/participants/all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Find all participant">[Find all participant]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#post-add-participant">/api/v1/participants</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Add participant">[Add participant]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#delete-remove-participant">/api/v1/participants/{participantParam}</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#delete-remove-participant">Delete participant</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-find-certificate">/api/v1/participants/{participantParam}/certificate</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Find certificate">[Find certificate]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-find-all-certificates">/api/v1/certificates</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-find-all-certificates">Find all certificates</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#post-upload-certificate">/api/v1/participants/{participantParam}/certificate/{certificateName}/{processParam}</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#post-upload-certificate">Upload certificate</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#delete-remove-certificate">/api/v1/participants/{participantParam}/certificate/{certificateSerialNumber}</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#delete-remove-certificate">Delete certificate</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-find-user">/api/v1/users</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Find user">[Find user]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-all-users">/api/v1/users/all</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#get-all-users">Find all users</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#post-add-user">/api/v1/users</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#Add user">[Add user]</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#delete-user">/api/v1/users</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#delete-user">Delete user</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">application/json, application/jose</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_participants">Participants</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="get-find-participant">Find a participant</h3>
<div class="paragraph">
<p>A <code>GET</code> request is used to find a given participant</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">/api/v1/participants/{participantParam}</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>participantParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">scheme + identifier = participantParam. Example 'iso6523-actorid-upis::9908:910539000'</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/participants/iso6523-actorid-upis::9908:910539000' -i -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/v1/participants/iso6523-actorid-upis::9908:910539000 HTTP/1.1
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 114

{
  "id" : 10,
  "identifier" : "9908:910539000",
  "scheme" : "iso6523-actorid-upis",
  "name" : "Grimsby"
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
Content-Length: 88

{
  "errors" : [ null, "no.difi.virksert.server.lang.ParticipantNotFoundException" ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the given participant does not exist then <code>404 Not found</code> will be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="get-find-all-participants">Find all participants</h3>
<div class="paragraph">
<p>A <code>GET</code> request is used to find and return a list of all registered participants</p>
</div>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/participants/all' -i -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/v1/participants/all HTTP/1.1
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 118

[ {
  "id" : 10,
  "identifier" : "9908:910539000",
  "scheme" : "iso6523-actorid-upis",
  "name" : "Grimsby"
} ]</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 204 No Content</code></pre>
</div>
</div>
<div class="paragraph">
<p>If there is no participants to be retrieved from the database a <code>204 No Content</code> will be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="post-add-participant">Add new participant</h3>
<div class="paragraph">
<p>A <code>POST</code> request is used to add a new participant</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Request parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>identifier</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the value of ICD:orgnumber example: 9908:991825827</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the participant</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/participants?identifier=9908%3A910539000&amp;name=Grimsby' -i -X POST -H 'Content-Type: application/json' -H 'Accept: application/json' -d '{
  "id" : 10,
  "identifier" : "9908:910539000",
  "scheme" : "iso6523-actorid-upis",
  "name" : "Grimsby"
}'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/v1/participants?identifier=9908%3A910539000&amp;name=Grimsby HTTP/1.1
Content-Type: application/json
Accept: application/json
Host: localhost:8080
Content-Length: 114

{
  "id" : 10,
  "identifier" : "9908:910539000",
  "scheme" : "iso6523-actorid-upis",
  "name" : "Grimsby"
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response1</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 409 Conflict
Content-Type: application/json;charset=UTF-8
Content-Length: 93

{
  "errors" : [ null, "no.difi.virksert.server.lang.ParticipantAlreadyExistsException" ]
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response2</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 500 Internal Server Error</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the participant already exists then <code>409 Conflict</code> will be returned. If the request is missing a request parameter the method will return an <code>500 Error</code>. Both <code>name</code> and <code>identifier</code> are required.</p>
</div>
</div>
<div class="sect2">
<h3 id="delete-remove-participant">Delete participant</h3>
<div class="paragraph">
<p>A <code>DELETE</code> request is used to find and delete a registered participant</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">/api/v1/participants/{participantParam}</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>participantParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the value of ICD:orgnumber example: 9908:991825827</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/participants/iso6523-actorid-upis::9908:910539000' -i -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /api/v1/participants/iso6523-actorid-upis::9908:910539000 HTTP/1.1
Content-Type: application/json
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
Content-Length: 88

{
  "errors" : [ null, "no.difi.virksert.server.lang.ParticipantNotFoundException" ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the given participant is not found an <code>404 Not Found</code> will be returned</p>
</div>
</div>
<div class="sect2">
<h3 id="get-find-certificate">Find a certificate</h3>
<div class="paragraph">
<p>A <code>GET</code> request is used to find and all certificates registered on a given participant</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">/api/v1/participants/{participantParam}/certificate</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>participantParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">scheme + identifier = participantParam. Example 'iso6523-actorid-upis::9908:910539000'</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/participants/iso6523-actorid-upis::9908:910539000/certificate' -i -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/v1/participants/iso6523-actorid-upis::9908:910539000/certificate HTTP/1.1
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 2201

[ {
  "id" : 0,
  "identifier" : "CertificateIdentifier",
  "name" : "CertificateName",
  "subject" : "CertificateSubject",
  "issuer" : "IssuerOfTheCertificate",
  "participant" : {
    "id" : 10,
    "identifier" : "9908:910539000",
    "scheme" : "iso6523-actorid-upis",
    "name" : "Grimsby"
  },
  "registrations" : [ {
    "id" : 0,
    "participant" : {
      "id" : 10,
      "identifier" : "9908:910539000",
      "scheme" : "iso6523-actorid-upis",
      "name" : "Grimsby"
    },
    "process" : {
      "id" : 0,
      "identifier" : "urn:www.difi.no:profile:move:ver1.0",
      "scheme" : "difi-move-temp",
      "title" : "difi-move-temp"
    }
  } ],
  "certificate" : "MIID/DCCAuSgAwIBAgIETsv9ajANBgkqhkiG9w0BAQsFADBeMRIwEAYDVQQKEwlEaWZpIHRlc3QxEjAQBgNVBAUTCTk5MTgyNTgyNzE0MDIGA1UEAxMrRElGSSB0ZXN0IHZpcmtzb21oZXRzc2VydGlmaWF0IGludGVybWVkaWF0ZTAeFw0xOTEwMDUwNzUwMDVaFw0yNDExMDUwODUwMDVaMD0xEjAQBgNVBAUTCTkxMDUzOTg5MjEnMCUGA1UEAxMeRElGSSB0ZXN0IHZpcmtzb21oZXRzc2VydGlmaWF0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzPOEqili4Ubu6WZpJD6mfaJX022mENMSVfXgbxzSOVCjGdyyq71+7NapeVZMBwxDOeec9+szuhkLoHLHc3Za2UpXGe6qlReC7IMOouIZeHdWE07uuZ5z2F86JU01RKFG8rXLyB1mdIwZJTykjrDo5Q5+bEZlBV1SqtIlW0maopBkXzBQg1UEY31W8uuHPwglcvB77zUflKrAaaP+w1C96c7Tj4hTtp4TsvGMWyvrTMOOq6AKnITijwqjcG6mheb74etR6zqe3sIsXsKO6dN0Zi63o51A9E2ziheu+iW0OOx6k2srr89ck4lhQTlWGzXJd0VgnbA1x/KMvax5c/DlhwIDAQABo4HiMIHfMIGLBgNVHSMEgYMwgYCAFC0wPplnLfjHrg8Rj8M6O7BdJ73AoWKkYDBeMRIwEAYDVQQKEwlEaWZpIHRlc3QxEjAQBgNVBAUTCTk5MTgyNTgyNzE0MDIGA1UEAxMrRElGSSB0ZXN0IHZpcmtzb21oZXRzc2VydGlmaWF0IGludGVybWVkaWF0ZYIEK1VFqzAdBgNVHQ4EFgQUyEokeVww5BjDieSHicYsQaS6w8gwCQYDVR0TBAIwADAVBgNVHSAEDjAMMAoGCGCEQgEBAQFkMA4GA1UdDwEB/wQEAwIEsDANBgkqhkiG9w0BAQsFAAOCAQEAF/LwwHJcZKKLLiQ3t+1kQxnkEmuSfphM7djqVDty3zR6LLijMIi4EzBMGgBu/9pxTl6Y48Ao36/C3iOVWCboYq/mGfujBdfreRJYIdF65KuMcMaSCO4ZRgtFACkpJUi2f0PiMPYaD/+/9No2itFZ4x3QM3y/5aJZ8KX0pAOfgeT7oLXzeFfSb8Ezr4SyvNAZ4+N5mcpmXisT2PDSuswqo1N0o+IV4/4WlifrIknnEA3nYJhIP1JtEhHiRAZxzHdBN7726RiQCMrpUy6S5wGeULsgQBKQpoQ4JyPZtNfpXP/UC969mWZKAlD6ABWFbye1xP/QZBDvkn+EeKLkif4mlQ==",
  "serialNumber" : "1321991530",
  "expiration" : 1730796605000,
  "revoked" : 0,
  "updated" : 1581515117456
} ]</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 404 Not Found</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the given certificate is not found a <code>404 Not Found</code> will be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="post-upload-certificate">Upload certificate</h3>
<div class="paragraph">
<p>A <code>POST</code> request is used to upload a certificate and set registrations on a given participant</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">/api/v1/participants/{participantParam}/certificate/{certificateName}/{processParam}</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>participantParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the value of ICD:orgnumber example: 9908:991825827</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>certificateName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the certificate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>processParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process to register on certificate</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/participants/iso6523-actorid-upis::9908:910539892/certificate/straumsgrendCertName/difi-move-temp::urn:www.difi.no:profile:move:ver1.0' -i -X POST -H 'Content-Type: application/json' -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/v1/participants/iso6523-actorid-upis::9908:910539892/certificate/straumsgrendCertName/difi-move-temp::urn:www.difi.no:profile:move:ver1.0 HTTP/1.1
Content-Type: application/json
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 409 Conflict
Content-Type: application/json;charset=UTF-8
Content-Length: 93

{
  "errors" : [ null, "no.difi.virksert.server.lang.CertificateAlreadyExistsException" ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you attempt to upload a certificate who already exists on a participant this will fail and a <code>409 Conflict</code> will be returned</p>
</div>
</div>
<div class="sect2">
<h3 id="delete-remove-certificate">Delete certificate</h3>
<div class="paragraph">
<p>A <code>DELETE</code> request is used to find and delete a certificate from the given participant</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">/api/v1/participants/{participantParam}/certificate/{certificateSerialNumber}</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>participantParam</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the value of ICD:orgnumber example: 9908:991825827</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>certificateSerialNumber</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serial number of the certificate</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/participants/iso6523-actorid-upis::9908:910539892/certificate/1321991530' -i -X DELETE -H 'Content-Type: application/json' -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /api/v1/participants/iso6523-actorid-upis::9908:910539892/certificate/1321991530 HTTP/1.1
Content-Type: application/json
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
Content-Length: 95

{
  "errors" : [ "not found", "no.difi.virksert.server.lang.CertificateNotFoundException" ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the given certificate is not found a <code>404 Not Found</code> will be returned and the certificate won&#8217;t be deleted.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_certificates">Certificates</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="get-find-all-certificates">Find all certificates</h3>
<div class="paragraph">
<p>A <code>GET</code> request is used to find and return a list of all certificates from any participant. Can return multiple certificates.</p>
</div>
<div class="sect3">
<h4 id="_request_parameters_are_optional">Request parameters are optional.</h4>
<div class="paragraph">
<p>This endpoint can take one out of two possible request parameters, or be called without any parameter. This is used to find all
certificates expiring within given amount of days or a before a given date. The request parameters are mutually exclusive. Examples shown below.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Request parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expiresIn</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Certificate expires in X days and Y time.  Example 'P100DT3H' equals 100 days and 3 hours</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>expires</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expiration date in ISO-8601 format. Example '2020-06-06'</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/certificates' -i -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/v1/certificates HTTP/1.1
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 2201

[ {
  "id" : 0,
  "identifier" : "CertificateIdentifier",
  "name" : "CertificateName",
  "subject" : "CertificateSubject",
  "issuer" : "IssuerOfTheCertificate",
  "participant" : {
    "id" : 10,
    "identifier" : "9908:910539000",
    "scheme" : "iso6523-actorid-upis",
    "name" : "Grimsby"
  },
  "registrations" : [ {
    "id" : 0,
    "participant" : {
      "id" : 10,
      "identifier" : "9908:910539000",
      "scheme" : "iso6523-actorid-upis",
      "name" : "Grimsby"
    },
    "process" : {
      "id" : 0,
      "identifier" : "urn:www.difi.no:profile:move:ver1.0",
      "scheme" : "difi-move-temp",
      "title" : "difi-move-temp"
    }
  } ],
  "certificate" : "MIID/DCCAuSgAwIBAgIETsv9ajANBgkqhkiG9w0BAQsFADBeMRIwEAYDVQQKEwlEaWZpIHRlc3QxEjAQBgNVBAUTCTk5MTgyNTgyNzE0MDIGA1UEAxMrRElGSSB0ZXN0IHZpcmtzb21oZXRzc2VydGlmaWF0IGludGVybWVkaWF0ZTAeFw0xOTEwMDUwNzUwMDVaFw0yNDExMDUwODUwMDVaMD0xEjAQBgNVBAUTCTkxMDUzOTg5MjEnMCUGA1UEAxMeRElGSSB0ZXN0IHZpcmtzb21oZXRzc2VydGlmaWF0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzPOEqili4Ubu6WZpJD6mfaJX022mENMSVfXgbxzSOVCjGdyyq71+7NapeVZMBwxDOeec9+szuhkLoHLHc3Za2UpXGe6qlReC7IMOouIZeHdWE07uuZ5z2F86JU01RKFG8rXLyB1mdIwZJTykjrDo5Q5+bEZlBV1SqtIlW0maopBkXzBQg1UEY31W8uuHPwglcvB77zUflKrAaaP+w1C96c7Tj4hTtp4TsvGMWyvrTMOOq6AKnITijwqjcG6mheb74etR6zqe3sIsXsKO6dN0Zi63o51A9E2ziheu+iW0OOx6k2srr89ck4lhQTlWGzXJd0VgnbA1x/KMvax5c/DlhwIDAQABo4HiMIHfMIGLBgNVHSMEgYMwgYCAFC0wPplnLfjHrg8Rj8M6O7BdJ73AoWKkYDBeMRIwEAYDVQQKEwlEaWZpIHRlc3QxEjAQBgNVBAUTCTk5MTgyNTgyNzE0MDIGA1UEAxMrRElGSSB0ZXN0IHZpcmtzb21oZXRzc2VydGlmaWF0IGludGVybWVkaWF0ZYIEK1VFqzAdBgNVHQ4EFgQUyEokeVww5BjDieSHicYsQaS6w8gwCQYDVR0TBAIwADAVBgNVHSAEDjAMMAoGCGCEQgEBAQFkMA4GA1UdDwEB/wQEAwIEsDANBgkqhkiG9w0BAQsFAAOCAQEAF/LwwHJcZKKLLiQ3t+1kQxnkEmuSfphM7djqVDty3zR6LLijMIi4EzBMGgBu/9pxTl6Y48Ao36/C3iOVWCboYq/mGfujBdfreRJYIdF65KuMcMaSCO4ZRgtFACkpJUi2f0PiMPYaD/+/9No2itFZ4x3QM3y/5aJZ8KX0pAOfgeT7oLXzeFfSb8Ezr4SyvNAZ4+N5mcpmXisT2PDSuswqo1N0o+IV4/4WlifrIknnEA3nYJhIP1JtEhHiRAZxzHdBN7726RiQCMrpUy6S5wGeULsgQBKQpoQ4JyPZtNfpXP/UC969mWZKAlD6ABWFbye1xP/QZBDvkn+EeKLkif4mlQ==",
  "serialNumber" : "1321991530",
  "expiration" : 1730796605000,
  "revoked" : 0,
  "updated" : 1581515117456
} ]</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 400 Bad Request
Content-Type: application/json;charset=ISO-8859-1
Content-Length: 51

'expiresInDays' and 'expires' is mutually exclusive</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_users">Users</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="get-find-user">Find a user</h3>
<div class="paragraph">
<p>A <code>GET</code> request used to find and return a given user.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Request parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email of the user</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/users?email=united%40test.no' -i -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/v1/users?email=united%40test.no HTTP/1.1
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 319

{
  "id" : 1337,
  "identifier" : "UserDummyIdentifier",
  "participant" : {
    "id" : 10,
    "identifier" : "9908:910539000",
    "scheme" : "iso6523-actorid-upis",
    "name" : "Grimsby"
  },
  "name" : "Manchester",
  "email" : "united@test.no",
  "hasAccess" : false,
  "hasReceiveMessages" : false
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
Content-Length: 81

{
  "errors" : [ null, "no.difi.virksert.server.lang.UserNotFoundException" ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you request a user that does not exist a <code>404 Not Found</code> will be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="get-all-users">Find all users</h3>
<div class="paragraph">
<p>A <code>GET</code> request to find all registered users</p>
</div>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/users/all' -i -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/v1/users/all HTTP/1.1
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 323

[ {
  "id" : 1337,
  "identifier" : "UserDummyIdentifier",
  "participant" : {
    "id" : 10,
    "identifier" : "9908:910539000",
    "scheme" : "iso6523-actorid-upis",
    "name" : "Grimsby"
  },
  "name" : "Manchester",
  "email" : "united@test.no",
  "hasAccess" : false,
  "hasReceiveMessages" : false
} ]</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 204 No Content</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no users are registered in the database you will receive a <code>204 No Content</code> in return.</p>
</div>
</div>
<div class="sect2">
<h3 id="post-add-user">Add new User</h3>
<div class="paragraph">
<p>A <code>POST</code> request to add a new admin user, no specific participant need to be supplied. Default the values other than <code>email</code> and <code>name</code>
may be empty. The API does not support adding users to a specific participant due to current use cases, this might be added in the future.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Request parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email of the user</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the user</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/users?email=United%40test.no&amp;name=Manchester' -i -X POST -H 'Content-Type: application/json' -H 'Accept: application/json' -d '{
  "id" : 1337,
  "identifier" : "UserDummyIdentifier",
  "participant" : {
    "id" : 10,
    "identifier" : "9908:910539000",
    "scheme" : "iso6523-actorid-upis",
    "name" : "Grimsby"
  },
  "name" : "Manchester",
  "email" : "united@test.no",
  "hasAccess" : false,
  "hasReceiveMessages" : false
}'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/v1/users?email=United%40test.no&amp;name=Manchester HTTP/1.1
Content-Type: application/json
Accept: application/json
Host: localhost:8080
Content-Length: 319

{
  "id" : 1337,
  "identifier" : "UserDummyIdentifier",
  "participant" : {
    "id" : 10,
    "identifier" : "9908:910539000",
    "scheme" : "iso6523-actorid-upis",
    "name" : "Grimsby"
  },
  "name" : "Manchester",
  "email" : "united@test.no",
  "hasAccess" : false,
  "hasReceiveMessages" : false
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 409 Conflict
Content-Type: application/json;charset=UTF-8
Content-Length: 86

{
  "errors" : [ null, "no.difi.virksert.server.lang.UserAlreadyExistsException" ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you attempt to add a user with an <code>email</code> or a <code>name</code> that already exists a <code>409 Conflict</code> will be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="delete-user">Delete user</h3>
<div class="paragraph">
<p>A <code>DELETE</code> request that deletes the given user if found and returns <code>200 OK</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Request parameters</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>email</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Email of the user</p></td>
</tr>
</tbody>
</table>
<div class="listingblock primary">
<div class="title">Curl</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:8080/api/v1/users?email=united%40test.no' -i -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/v1/users?email=united%40test.no HTTP/1.1
Accept: application/json
Host: localhost:8080</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Ok response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 319

{
  "id" : 1337,
  "identifier" : "UserDummyIdentifier",
  "participant" : {
    "id" : 10,
    "identifier" : "9908:910539000",
    "scheme" : "iso6523-actorid-upis",
    "name" : "Grimsby"
  },
  "name" : "Manchester",
  "email" : "united@test.no",
  "hasAccess" : false,
  "hasReceiveMessages" : false
}</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">Error response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 404 Not Found
Content-Type: application/json;charset=UTF-8
Content-Length: 81

{
  "errors" : [ null, "no.difi.virksert.server.lang.UserNotFoundException" ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you attempt to delete a user that does not exist the API will return <code>404 Not found</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-03-19 09:44:07 CET
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>